<script type="text/template" id="locationTemplate">
<div class="row" style="margin-top: -50px;">
  <div class="col-lg-12">
    <div class="bs-example table-responsive page-header" style="margin: 70px 0 21px!important; border-bottom: none!important">

      <hr/>

      <div style="display:none" class="alert alert-dismissable alert-success success-message">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>Well done!</strong> <span id="title"></span>
      </div>
      <div style="display:none" class="alert alert-dismissable alert-danger error-message">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>Oh snap!</strong> <span id="title"></span>
      </div>

      <h4>Locations <a class="btn btn-success" href="#location/new">New</a></h4>
      <table id="contactsGrid" class="table table-striped table-bordered table-hover">
        <thead>
          <tr>
            <th>Name</th>
            <th>Latlong</th>
            <th>Featured Photo</th>
            <th>Death Count</th>
            <th>Affected Count</th>
            <th>Status Board</th>
            <th>Needs</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <%  
            if ($.isEmptyObject(locations)) { 
          %>
              <tr><td colspan='10'>No Record Found</td></tr>
          <% } else { 
              $.each(locations, function () { 
          %>
              <tr class="active" data-name="<%- _.unescape(this.name) %>" data-id="<%- this.id %>">
                  <td><%- _.unescape(this.name) %></td>
                  <td><%- _.unescape(this.latlong) %></td>
                  <td><%- _.unescape(this.featured_photo) %></td>
                  <td><%- _.unescape(this.death_count) %></td>
                  <td><%- _.unescape(this.affected_count) %></td>
                  <td><%- _.unescape(this.status_board) %></td>
                  <td>
                    <% _.each(this.needs, function(item, name) { %>
                      <% if (name == "medical_workers") { %>
                        Medical Workers: <%- item %> <br/>
                      <% } %>
                      <% if (name == "social_workers") { %>
                        Social Workers: <%- item %><br/>
                      <% } %>
                      <% if (name == "shelter") { %>
                        Shelter: <%- item %><br/>
                      <% } %>
                      <% if (name == "cloths") { %>
                        Clothes: <%- item %><br/>
                      <% } %>
                      <% if (name == "water") { %>
                        Water: <%- item %><br/>
                      <% } %>
                      <% if (name == "medicines") { %>
                        Medicines: <%- item %><br/>
                      <% } %>
                      <% if (name == "formula") { %>
                        Formula: <%- item %><br/>
                      <% } %>
                      <% if (name == "food") { %>
                        Food: <%- item %><br/>
                      <% } %>
                      <% if (name == "flashlights") { %>
                        Flashlights: <%- item %><br/>
                      <% } %>
                      <% if (name == "toiletries") { %>
                        Toiletries: <%- item %><br/>
                      <% } %>
                    <% }) %>
                  </td>
                  <td>
                    <% _.each(this.status, function(item, name) { %>
                      <% if (name == "power" && item == "true") { %>
                        Power: Yes<br/>
                      <% } %>
                      <% if (name == "communication" && item == "true") { %>
                        Communication: Yes<br/>
                      <% } %>
                      <% if (name == "water" && item == "true") { %>
                        Water: Yes<br/>
                      <% } %>
                    <% }) %>
                  </td>
                  <td align='center'><a class="first">Edit</a> | <a class="last">Delete</a></td>
              </tr>
          <%    
              })
            }
          %>
        </tbody>
      </table>

    </div>
  </div>
</div>
</script>

<script type="text/template" id="addLocationTemplate">
  <form enctype="multipart/form-data" class="bs-example form-horizontal" id="frmAddLocation">
    <div class="row" style="margin-top: -50px;">
      <div class="col-lg-12">
        <div class="page-header" style="border-bottom: none!important">
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title"><strong>New Location</strong></h3>
          </div>
          <div class="panel-body">
            <p>
              <input type="text" id="name" required="required" class="form-control" placeholder="Location Name">
            </p>
            <p>
              <input type="text" id="latlong" required="required" class="form-control" placeholder="Lat Long">
            </p>
            <p>
              <input type="text" id="featured_photo" required="required" class="form-control" placeholder="Featured Photo">
            </p>
            <p>
              <input type="text" id="death_count" required="required" class="form-control" placeholder="Death Count">
            </p>
            <p>
              <input type="text" id="affected_count" required="required" class="form-control" placeholder="Affected Count">
            </p>
            <p>
              <input type="text" id="status_board" required="required" class="form-control" placeholder="Status Board">
            </p>
            Needs:
            <p>
              <input type="text" id="food" required="required" class="form-control" placeholder="Number of food">

              <input type="text" id="water" required="required" class="form-control" placeholder="Number of water">

              <input type="text" id="medicines" required="required" class="form-control" placeholder="Number of medicines">

              <input type="text" id="social_workers" required="required" class="form-control" placeholder="Number of social_workers">

              <input type="text" id="medical_workers" required="required" class="form-control" placeholder="Number of medical_workers">

              <input type="text" id="shelter" required="required" class="form-control" placeholder="Number of shelter">

              <input type="text" id="formula" required="required" class="form-control" placeholder="Number of formula">

              <input type="text" id="toiletries" required="required" class="form-control" placeholder="Number of toiletries">

              <input type="text" id="flashlights" required="required" class="form-control" placeholder="Number of flashlights">

              <input type="text" id="cloths" required="required" class="form-control" placeholder="Number of cloths">
            </p>
            
            <p>
              <input type="checkbox" name="status" id="status_power" class="form-control"/> Power
            </p>

            <p>
              <input type="checkbox" name="status" id="status_communication" class="form-control"/> Communication
            </p>
            <p>
              <input type="checkbox" name="status" id="status_water" class="form-control"/> Water
            </p>
            <p>
              <button type="submit" class="btn btn-primary">Submit</button> 
              <a href="#locations" class="btn btn-default">Cancel</a> 
              <div style="display:none" class="alert alert-dismissable alert-success success-message">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>Well done!</strong> New contact has been added.
              </div>
              <div style="display:none" class="alert alert-dismissable alert-danger error-message">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>Oh snap!</strong> Unable to add new contact. Try again.
              </div>
            </p>
          </div>
        </div>
      </div>
    </div>
  </form>
</script>